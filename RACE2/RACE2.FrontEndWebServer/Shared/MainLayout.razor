@inherits LayoutComponentBase
@using RACE2.FrontEndWebServer.ExceptionGlobalErrorHandling;
@using RACE2.FrontEndWebServer.Pages
<PageTitle>RACE2.FrontEndWeb</PageTitle>

@* <Header />  *@
<div class="page">
    <main>
@*         <div class="govuk-width-container "> 
            <ConsentCookie />
        </div> 
        <article class="content px-4">
            @Body
        </article>*@
        <CustomErrorBoundary Context="exception" @ref="_customErrorBoundary">
            <ChildContent>
                @Body
            </ChildContent>
            <ErrorContent Context="exception">
                <RACE2.FrontEndWebServer.Pages.ApplicationErrorPage ErrorMessage="@exception.Message" />
            </ErrorContent>
        </CustomErrorBoundary>      
    </main>
</div>

@code {
    private CustomErrorBoundary? _customErrorBoundary;

    protected override void OnInitialized()
    {
        _customErrorBoundary = new CustomErrorBoundary();
    }

    protected override void OnParametersSet()
    {
        _customErrorBoundary?.Recover();
    }
}